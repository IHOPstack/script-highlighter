<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Script Highlighter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
    <script>
        window.pdfjsLib = window['pdfjs-dist/build/pdf'];
        window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js';
    </script>
    <link rel="icon" href="https://devinbeckwith.netlify.app/images/favicon.ico">
</head>

<body>
    <div class="container">
        <header>
            <h1>Script Highlighter</h1>
            <button id="feedback">Feedback</button>
            <dialog id="feedback-form">
                <form method="dialog" netlify>
                    <div class="form-field">
                        <label for="name">Name:</label>
                        <input type="text" name="name" id="name">
                    </div>
                    <div class="form-field">
                        <label for="message">Message:</label>
                        <input type="text" name="message" id="message">
                    </div>
                </form>
            </dialog>
        </header>
        <main>
            <section class="info">
                <div class="description">
                    <p>Script Highlighter allows you to upload a script and download a copy with the lines of your
                        chosen character(s) highlighted.</p>
                </div>
                <div class="steps">
                    <h2>How to use:</h2>
                    <ol>
                        <li>Click the 'Upload' button to select your script file (PDF only for now).</li>
                        <li>Choose a character from the dropdown list.</li>
                        <li>Click 'Highlight Script' to highlight the chosen character's lines.</li>
                        <li>Review the highlighted script in the preview area.</li>
                        <li>Click 'Download' to save the highlighted script to your device.</li>
                    </ol>
                </div>
                <div class="description">
                </div>
            </section>
            <div class="ad-space-horizontal">Ad Space</div>
            <section class="actions">
                <div id="characterContainer">
                    <!-- Additional character sets will be inserted here -->
                </div>
                <div class="main-buttons">
                    <button id="uploadBtn" class="btn btn-primary"><i class="fas fa-upload"></i> Upload</button>
                    <button id="highlightBtn" class="btn btn-highlight"><i class="fas fa-highlighter"></i> Highlight
                        Script</button>
                    <button id="addCharacterBtn" class="btn btn-secondary"><i class="fas fa-plus"></i> Add
                        Character</button>
                </div>
            </section>
            <section class="preview">
                <div id="previewArea">Highlighted script will appear here.</div>
            </section>
            <section class="main-buttons">
                <button id="downloadBtn" class="btn btn-primary"><i class="fas fa-download"></i> Download</button>
                <!-- <button id="editBtn" class="btn btn-tertiary"><i class="fas fa-pencil-alt"></i> Edit Highlights</button> -->
            </section>
            <h2>Don't have a script but want to test the functionality? Try one of these!</h2>
            <div class="sample-script-links">
                <a href="/sample_scripts/Godot.pdf" download>Waiting For Godot
                    (Play)</a>
                <a href="/sample_scripts/Ramy_1x01_-_Pilot.pdf" download>Ramy Pilot (Live Action TV)</a>
                <a href="/sample_scripts/SpongeBob_SquarePants_Sample.pdf" download>SpongeBob Spec (Animated TV)</a>
            </div>
            <p>Just select the script and then hit upload!</p>
            <section class="info">
                <h2>Is it safe?</h2>
                <ul>
                    <li>YES!</li>
                    <li>All highlighting is done in the browser so no other entity will obtain a copy of your script due
                        to your use of this website.</li>
                    <li>The file downloaded is an exact copy of your uploaded pdf with the exception of the highlights
                        rendered on top.</li>
                </ul>
                <h2>Known Issues (in order of priority).</h2>
                <ul>
                    <li>Condensed form play scripts are the main format I am unable to handle.</li>
                    <li>Scanned documents (rather than electronically generated) do not work.</li>
                    <li>
                        Pdfs cannot be displayed on mobile without also making those pdfs publicly
                        available.
                    </li>
                    <li>
                        Accommodate B&W printing with a greyscale highlight color.
                    </li>
                    <li>
                        Add capability of creating multiple pdfs at once i.e. create a copy of highlighted
                        scripts for each character.
                    </li>
                </ul>
            </section>
        </main>
    </div>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script type="module" src="script.js"></script>
</body>

</html>